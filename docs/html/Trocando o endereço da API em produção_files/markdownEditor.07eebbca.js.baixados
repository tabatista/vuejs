var MarkdownEditor=function(){function t(t){var r=t.querySelector(".markdownEditor-source"),o=t.querySelector(".markdownEditor-preview"),i=t.querySelector(".markdownEditor-preview-output");if(null!=r&&null!=o){var a=function(t){var n;return function(){var r=this,o=arguments;clearTimeout(n),n=setTimeout(function(){t.apply(r,o)},e?300:800)}}(function(){var t=arguments;return function(e){n.apply(null,t)}}(r,o,i));r.addEventListener("input",a),r.addEventListener("keydown",function(t){n(r,o,i)}),n(r,o,i)}}function n(t,n,e){!function t(n,e,r){var o=n.value.replaceAll("[code]","```").replaceAll("[/code]","```");if("undefined"!=typeof marked){var i=marked(o);e.innerHTML=i,r.value=i}else setTimeout(function(){t(n,e,r)},300)}(t,n,e)}String.prototype.replaceAll=String.prototype.replaceAll||function(t,n){return this.split(t).join(n)};for(var e=matchMedia("(min-width: 800px)").matches,r=document.querySelectorAll(".markdownEditor"),o=0;o<r.length;o++)if(t(r[o]),e){var i=r[o].querySelector(".markdownEditor-button-preview");null!=i&&gnarus.buttonToggle.toggle(i)}return $(".markdownEditor-textArea").on("input",function(){$(".markdownEditor-preview").scrollTop($(".markdownEditor-preview")[0].scrollHeight)}),$(".markdownEditor-button-code").on("click",function(){var t=$(this.closest(".markdownEditor")).find(".markdownEditor-source"),n=$(t)[0],e=$(this).data("insert-code");t.caret("\n```\n"+e+"\n```\n");var r=t.caret()-"\n```\n".length;t.caret(r),n.setSelectionRange(r-e.length,r)}),$(".markdownEditor-button-format").on("click",function(){Aria.expandingButton($(this)),"true"===$(this).attr("aria-expanded")&&$(".markdownEditor-help").on("animationend",function(){$(this).focus()})}),{configure:t}}();